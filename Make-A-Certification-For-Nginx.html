<!DOCTYPE html><html><head><meta name="msvalidate.01" charset="utf-8" content="4C4B868D728A3628124107F6E39C691C"><script async src="//pagead2.googlesyndication.com/
pagead/js/adsbygoogle.js"></script><script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"pub-3492247823569079",enable_page_level_ads:!0})</script><script data-isso="https://comments.kmaa.top/" data-isso-id="thread-id" data-isso-css="true" data-isso-lang="en" data-isso-reply-to-self="false" data-isso-require-author="true" data-isso-require-email="false" data-isso-max-comments-top="10" data-isso-max-comments-nested="5" data-isso-reveal-on-click="5" data-isso-avatar="true" data-isso-avatar-bg="#f0f0f0" data-isso-avatar-fg="#9abf88 #5698c4 #e279a3 #9163b6 ..." data-isso-vote="true" data-isso-vote-levels="" data-isso-feed="false" src="https://comments.kmaa.top/js/embed.min.js"></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-152049817-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-152049817-1")</script><title>Make A Certification For Nginx | KeepV</title><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="description" content="I bought a domin. It is cheap for using one year. This draft will give you an example that how to config SSL for your website.Before doing this, you need to make sure that kmaa.top directs your ip of"><meta property="og:type" content="article"><meta property="og:title" content="Make A Certification For Nginx"><meta property="og:url" content="https://kmaa.top/Make-A-Certification-For-Nginx.html"><meta property="og:site_name" content="KeepV"><meta property="og:description" content="I bought a domin. It is cheap for using one year. This draft will give you an example that how to config SSL for your website.Before doing this, you need to make sure that kmaa.top directs your ip of"><meta property="og:image" content="https://kmaa.top/pictures/cloudflare.png"><meta property="article:published_time" content="2019-10-15T02:47:12.000Z"><meta property="article:modified_time" content="2020-06-16T05:06:28.351Z"><meta property="article:author" content="1"><meta property="article:tag" content="Nginx"><meta property="article:tag" content="Certification"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://kmaa.top/pictures/cloudflare.png"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css"><meta name="generator" content="Hexo 4.2.1"></head><body><div id="container"><div id="wrap"><header id="header"><div id="banner"></div><div id="header-outer" class="outer"><div id="header-title" class="inner"><h1 id="logo-wrap"><a href="/" id="logo">KeepV</a></h1></div><div id="header-inner" class="inner"><nav id="main-nav"><a id="main-nav-toggle" class="nav-icon"></a> <a class="main-nav-link" href="/">Home</a> <a class="main-nav-link" href="/archives">Archives</a></nav><nav id="sub-nav"><a id="nav-search-btn" class="nav-icon" title="Search"></a></nav><div id="search-form-wrap"><form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://kmaa.top"></form></div></div></div></header><div class="outer"><section id="main"><article id="post-Make-A-Certification-For-Nginx" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting"><div class="article-meta"><a href="/Make-A-Certification-For-Nginx.html" class="article-date"><time class="dt-published" datetime="2019-10-15T02:47:12.000Z" itemprop="datePublished">2019-10-15</time></a></div><div class="article-inner"><header class="article-header"><h1 class="p-name article-title" itemprop="headline name">Make A Certification For Nginx</h1></header><div class="e-content article-entry" itemprop="articleBody"><p>I bought a domin. It is cheap for using one year. This draft will give you an example that how to config SSL for your website.<br>Before doing this, you need to make sure that kmaa.top directs your ip of the server. Here is my cloudflare. Attention! Let the cloud keep grey before you fininsh the fllowing steps.</p><p><img src="/pictures/cloudflare.png" alt=""></p><a id="more"></a><p>Open your terminal and do it one by one.<br>You can generate <strong>kmaa.top.conf</strong> from <a href="https://nginxconfig.io" target="_blank" rel="noopener">here</a></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">apt install nginx</span><br><span class="line">apt install certbot</span><br><span class="line">apt install python-certbot-nginx</span><br><span class="line">certbot --nginx -d kmaa.top --register-unsafely-without-email</span><br><span class="line"></span><br><span class="line"># if you don&#39;t need nginx,just run</span><br><span class="line">certbot certonly -d kmaa.top --register-unsafely-without-email</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">touch &#x2F;etc&#x2F;nginx&#x2F;sites-available&#x2F;kmaa.top.conf</span><br><span class="line">vi &#x2F;etc&#x2F;nginx&#x2F;sites-available&#x2F;kmaa.top.conf</span><br><span class="line">**write below into kmaa.top.conf**</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">  root &#x2F;var&#x2F;www&#x2F;write&#x2F;public;</span><br><span class="line">  index index.html index.htm;</span><br><span class="line">  server_name kmaa.top;</span><br><span class="line">  listen  443 ssl;</span><br><span class="line">  ssl on;</span><br><span class="line">  ssl_certificate       &#x2F;etc&#x2F;letsencrypt&#x2F;live&#x2F;kmaa.top&#x2F;fullchain.pem;</span><br><span class="line">  ssl_certificate_key   &#x2F;etc&#x2F;letsencrypt&#x2F;live&#x2F;kmaa.top&#x2F;privkey.pem;</span><br><span class="line">  ssl_protocols         TLSv1.1 TLSv1.2;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  location &#x2F; &#123;</span><br><span class="line">    autoindex on;</span><br><span class="line">    try_files $uri $uri&#x2F; &#x2F;index.html;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	# additional config</span><br><span class="line">	include nginxconfig.io&#x2F;general.conf;</span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"># subdomains redirect</span><br><span class="line">server &#123;</span><br><span class="line">	listen 443 ssl http2;</span><br><span class="line">	listen [::]:443 ssl http2;</span><br><span class="line"></span><br><span class="line">	server_name *.kmaa.top;</span><br><span class="line"></span><br><span class="line">	# SSL</span><br><span class="line">	ssl_certificate &#x2F;etc&#x2F;letsencrypt&#x2F;live&#x2F;kmaa.top&#x2F;fullchain.pem;</span><br><span class="line">	ssl_certificate_key &#x2F;etc&#x2F;letsencrypt&#x2F;live&#x2F;kmaa.top&#x2F;privkey.pem;</span><br><span class="line">	ssl_trusted_certificate &#x2F;etc&#x2F;letsencrypt&#x2F;live&#x2F;kmaa.top&#x2F;chain.pem;</span><br><span class="line"></span><br><span class="line">	return 301 https:&#x2F;&#x2F;kmaa.top$request_uri;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># HTTP redirect</span><br><span class="line">server &#123;</span><br><span class="line">	listen 80;</span><br><span class="line">	listen [::]:80;</span><br><span class="line"></span><br><span class="line">	server_name .kmaa.top;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	location &#x2F; &#123;</span><br><span class="line">		return 301 https:&#x2F;&#x2F;kmaa.top$request_uri;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mkdir &#x2F;etc&#x2F;nginx&#x2F;nginxconfig.io</span><br><span class="line">touch &#x2F;etc&#x2F;nginx&#x2F;nginxconfig.io&#x2F;general.conf</span><br><span class="line">vi &#x2F;etc&#x2F;nginx&#x2F;nginxconfig.io&#x2F;general.conf</span><br><span class="line"></span><br><span class="line"># start</span><br><span class="line"># favicon.ico</span><br><span class="line">location &#x3D; &#x2F;favicon.ico &#123;</span><br><span class="line">	log_not_found off;</span><br><span class="line">	access_log off;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># robots.txt</span><br><span class="line">location &#x3D; &#x2F;robots.txt &#123;</span><br><span class="line">	log_not_found off;</span><br><span class="line">	access_log off;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># assets, media</span><br><span class="line">location ~* \.(?:css(\.map)?|js(\.map)?|jpe?g|png|gif|ico|cur|heic|webp|tiff?|mp3|m4a|aac|ogg|midi?|wav|mp4|mov|webm|mpe?g|avi|ogv|flv|wmv)$ &#123;</span><br><span class="line">	expires 7d;</span><br><span class="line">	access_log off;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># svg, fonts</span><br><span class="line">location ~* \.(?:svgz?|ttf|ttc|otf|eot|woff2?)$ &#123;</span><br><span class="line">	add_header Access-Control-Allow-Origin &quot;*&quot;;</span><br><span class="line">	expires 7d;</span><br><span class="line">	access_log off;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># gzip</span><br><span class="line">gzip on;</span><br><span class="line">gzip_vary on;</span><br><span class="line">gzip_proxied any;</span><br><span class="line">gzip_comp_level 6;</span><br><span class="line">gzip_types text&#x2F;plain text&#x2F;css text&#x2F;xml application&#x2F;json application&#x2F;javascript application&#x2F;rss+xml application&#x2F;atom+xml image&#x2F;svg+xml;</span><br><span class="line"># end</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># vi &#x2F;etc&#x2F;nginx&#x2F;nginx.conf </span><br><span class="line">include &#x2F;etc&#x2F;nginx&#x2F;sites-available&#x2F;*.conf;</span><br><span class="line">include &#x2F;var&#x2F;www&#x2F;*.conf;</span><br><span class="line"># We don&#39;t need default anymore. Remove it or add a &quot;#&quot; before it.</span><br><span class="line">#    include &#x2F;etc&#x2F;nginx&#x2F;sites-enabled&#x2F;*;</span><br></pre></td></tr></table></figure><p>Version of this certificate in the future, simply run certbot again with the “certonly” option. To non-interactively renew <em>all</em> of your certificates, run “certbot renew”</p><h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p><a href="https://www.digitalocean.com/community/tutorials/how-to-secure-nginx-with-let-s-encrypt-on-ubuntu-16-04" target="_blank" rel="noopener">How To Secure Nginx with Let’s Encrypt on Ubuntu 16.04</a></p></div><footer class="article-footer"><a data-url="https://kmaa.top/Make-A-Certification-For-Nginx.html" data-id="ckb0l0yey00117g4e1p04fku3" data-title="Make A Certification For Nginx" class="article-share-link">Share</a><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Nginx/" rel="tag">Nginx</a></li></ul></footer></div><nav id="article-nav"><a href="/How-to-move-Unturned-Server-data.html" id="article-nav-newer" class="article-nav-link-wrap"><strong class="article-nav-caption">Newer</strong><div class="article-nav-title">How to move Unturned Server data</div></a><a href="/How%20to%20reinstall%20Hexo.html" id="article-nav-older" class="article-nav-link-wrap"><strong class="article-nav-caption">Older</strong><div class="article-nav-title">How to reinstall Hexo</div></a></nav></article><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3492247823569079" data-ad-slot="2999761721" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></section><aside id="sidebar"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><div class="widget-wrap"><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3492247823569079" data-ad-slot="3553585058" data-ad-format="auto" data-full-width-responsive="true"></ins></div><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><div class="widget-wrap"><h3 class="widget-title">Tag Cloud</h3><div class="widget tagcloud"><a href="/tags/Aria2/" style="font-size:15px">Aria2</a> <a href="/tags/BBR/" style="font-size:10px">BBR</a> <a href="/tags/Bookmarks/" style="font-size:10px">Bookmarks</a> <a href="/tags/Clash/" style="font-size:10px">Clash</a> <a href="/tags/Commands/" style="font-size:10px">Commands</a> <a href="/tags/Debain/" style="font-size:12.5px">Debain</a> <a href="/tags/Docker/" style="font-size:10px">Docker</a> <a href="/tags/Dog/" style="font-size:10px">Dog</a> <a href="/tags/EOS/" style="font-size:10px">EOS</a> <a href="/tags/Firefox/" style="font-size:10px">Firefox</a> <a href="/tags/Github/" style="font-size:10px">Github</a> <a href="/tags/Graphic-Card/" style="font-size:10px">Graphic Card</a> <a href="/tags/Gv/" style="font-size:10px">Gv</a> <a href="/tags/HTTP-Proxy/" style="font-size:10px">HTTP Proxy</a> <a href="/tags/Hexo/" style="font-size:12.5px">Hexo</a> <a href="/tags/Iptables/" style="font-size:10px">Iptables</a> <a href="/tags/Linux/" style="font-size:17.5px">Linux</a> <a href="/tags/Music/" style="font-size:10px">Music</a> <a href="/tags/Nat/" style="font-size:10px">Nat</a> <a href="/tags/Nginx/" style="font-size:12.5px">Nginx</a> <a href="/tags/OpenWrt/" style="font-size:20px">OpenWrt</a> <a href="/tags/Printer/" style="font-size:10px">Printer</a> <a href="/tags/Rime/" style="font-size:10px">Rime</a> <a href="/tags/Samba4/" style="font-size:10px">Samba4</a> <a href="/tags/Socks5/" style="font-size:12.5px">Socks5</a> <a href="/tags/The-Economist/" style="font-size:12.5px">The Economist</a> <a href="/tags/Trojan/" style="font-size:10px">Trojan</a> <a href="/tags/TunSafe/" style="font-size:10px">TunSafe</a> <a href="/tags/Unturned/" style="font-size:12.5px">Unturned</a> <a href="/tags/V2ray/" style="font-size:10px">V2ray</a> <a href="/tags/Web-Browser/" style="font-size:10px">Web Browser</a> <a href="/tags/WireGuard/" style="font-size:12.5px">WireGuard</a> <a href="/tags/Xfce/" style="font-size:10px">Xfce</a> <a href="/tags/apkpure/" style="font-size:10px">apkpure</a> <a href="/tags/go-shadowsock2/" style="font-size:10px">go-shadowsock2</a> <a href="/tags/isso/" style="font-size:10px">isso</a> <a href="/tags/shadowsocks/" style="font-size:10px">shadowsocks</a> <a href="/tags/shadowsocks-libev/" style="font-size:15px">shadowsocks-libev</a> <a href="/tags/tinyfecVPN/" style="font-size:10px">tinyfecVPN</a> <a href="/tags/udp2raw/" style="font-size:12.5px">udp2raw</a> <a href="/tags/%E5%BD%B1%E8%A7%86/" style="font-size:12.5px">影视</a></div></div><div class="widget-wrap"><h3 class="widget-title">Archives</h3><div class="widget"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a><span class="archive-list-count">3</span></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">Recent Posts</h3><div class="widget"><ul><li><a href="/%E6%AF%94%E7%89%B9%E7%90%83%E4%BA%91%E7%9B%98%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Aria2%E4%B8%8B%E8%BD%BD.html">比特球云盘如何使用Aria2下载</a></li><li><a href="/Linux%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85go-shadowsock2.html">Linux如何安装go-shadowsock2</a></li><li><a href="/%E5%A5%BD%E5%89%A7%E6%8E%A8%E8%8D%90%E4%B9%8B%E3%80%8A%E6%88%91%E7%9A%84%E5%A4%A7%E5%8F%94%E3%80%8B.html">好剧推荐之《我的大叔》</a></li><li><a href="/%E5%A5%BD%E5%89%A7%E6%8E%A8%E8%8D%90%E4%B9%8B%E3%80%8A%E4%BE%A0%E6%8E%A2%E7%AE%80%E4%B8%8D%E7%9F%A5%E3%80%8B.html">好剧推荐之《侠探简不知》</a></li><li><a href="/V2ray%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Socks%E5%8D%8F%E8%AE%AE.html">V2ray如何使用Socks5协议</a></li></ul></div></div></aside></div><footer id="footer"><div class="outer"><div id="footer-info" class="inner">&copy; 2020 1 powered by Hexo</div></div></footer></div><nav id="mobile-nav"><a href="/" class="mobile-nav-link">Home</a> <a href="/archives" class="mobile-nav-link">Archives</a></nav><script src="/js/jquery-3.4.1.min.js"></script><script src="/fancybox/jquery.fancybox.min.js"></script><script src="/js/script.js"></script></div></body></html>